// Test: Non-extern (Ignis) functions consume ownership
// Expected: ERROR O0001 - use after move

@implements(Drop)
record Owned {
    public id: i32;
    drop(&mut self): void { return; }
}

function consume(s: Owned): void {
    return;
}

function main(): void {
    let a: Owned = Owned { id: 1 };

    // First call consumes ownership
    consume(a);

    // Second call is use-after-move error
    consume(a);

    return;
}
